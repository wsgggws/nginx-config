# 静态资源缓存配置
# 引用方式：include /etc/nginx/snippets/static-cache.conf;

# 图片、字体等长期缓存 (1 年)
location ~* \.(jpg|jpeg|png|gif|ico|svg|webp|avif)$ {
    expires 1y;
    add_header Cache-Control "public, immutable";
    add_header Vary "Accept-Encoding";
    access_log off;
}

# 字体文件
location ~* \.(woff|woff2|ttf|otf|eot)$ {
    expires 1y;
    add_header Cache-Control "public, immutable";
    add_header Access-Control-Allow-Origin "*";
    access_log off;
}

# CSS 和 JavaScript（带版本号可以长期缓存）
location ~* \.(css|js)$ {
    expires 1y;
    add_header Cache-Control "public, immutable";
    add_header Vary "Accept-Encoding";
    access_log off;
}

# HTML 文件短期缓存或不缓存
location ~* \.(html|htm)$ {
    expires 1h;
    add_header Cache-Control "public, must-revalidate";
}

# JSON/XML 数据文件
location ~* \.(json|xml)$ {
    expires 1h;
    add_header Cache-Control "public, must-revalidate";
}
